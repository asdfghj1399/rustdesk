    - name: Setup vcpkg (Fixed)
      shell: powershell
      run: |
        # 确保工作目录存在
        if (-not (Test-Path "$env:GITHUB_WORKSPACE")) {
            New-Item -ItemType Directory -Path "$env:GITHUB_WORKSPACE" -Force
        }
        
        # 修复克隆方式 - 先克隆主分支再checkout特定commit
        $vcpkgDir = "$env:GITHUB_WORKSPACE\vcpkg"
        if (-not (Test-Path $vcpkgDir)) {
            git config --global core.longpaths true
            git clone https://github.com/microsoft/vcpkg $vcpkgDir
            cd $vcpkgDir
            git checkout $env:VCPKG_COMMIT_ID
        }
        
        # 验证克隆结果
        if (-not (Test-Path "$vcpkgDir\bootstrap-vcpkg.bat")) {
            throw "vcpkg bootstrap file not found after clone"
        }
        
        # 初始化vcpkg
        cd $vcpkgDir
        .\bootstrap-vcpkg.bat -disableMetrics
        .\vcpkg integrate install
