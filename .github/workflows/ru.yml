- name: 最终验证
  shell: powershell
  run: |
    # 限制递归深度并忽略错误
    Get-ChildItem C:\nasm -Depth 2 -ErrorAction SilentlyContinue
    
    # 精准检查 nasm.exe 的存在性
    if (-not (Test-Path "C:\nasm\nasm.exe")) {
      Write-Output "::error::NASM 安装失败"
      exit 1
    }
    
    # 选择性路径输出
    $safePaths = @('C:\nasm', 'C:\nasm\bin')
    $safePaths | ForEach-Object {
      if (Test-Path $_) {
        Write-Output "检查目录 $_"
        Get-ChildItem $_ -File
      }
    }
